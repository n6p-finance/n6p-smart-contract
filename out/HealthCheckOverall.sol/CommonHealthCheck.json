{"abi":[{"type":"constructor","inputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"check","inputs":[{"name":"profit","type":"uint256","internalType":"uint256"},{"name":"loss","type":"uint256","internalType":"uint256"},{"name":"debtPayment","type":"uint256","internalType":"uint256"},{"name":"debtOutstanding","type":"uint256","internalType":"uint256"},{"name":"totalDebt","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"checks","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"governance","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"lossLimitRatio","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"management","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"profitLimitRatio","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"setCheck","inputs":[{"name":"_strategy","type":"address","internalType":"address"},{"name":"_check","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setGovernance","inputs":[{"name":"_governance","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setManagement","inputs":[{"name":"_management","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setProfitLimitRatio","inputs":[{"name":"_profitLimitRatio","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setStrategyLimits","inputs":[{"name":"_strategy","type":"address","internalType":"address"},{"name":"_profitLimitRatio","type":"uint256","internalType":"uint256"},{"name":"_lossLimitRatio","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setlossLimitRatio","inputs":[{"name":"_lossLimitRatio","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"strategiesLimits","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"profitLimitRatio","type":"uint256","internalType":"uint256"},{"name":"lossLimitRatio","type":"uint256","internalType":"uint256"},{"name":"exists","type":"bool","internalType":"bool"}],"stateMutability":"view"}],"bytecode":{"object":"0x6080806040523461003c5760018060a01b0319338160035416176003553390600454161760045561012c5f55606460015561066b90816100418239f35b5f80fdfe604060808152600480361015610013575f80fd5b5f91823560e01c908162fd31f01461035c5781630ef5ee02146103305781631afdc5a2146102d457816327fff0db146102995781634a5d09431461027c5781635aa6e675146102535781637d9699321461023457816388a8d6021461020b578163950b3d73146101e0578163ab033ea914610193578163c70fa00b14610156578163c935433714610101575063d4a22bde146100ad575f80fd5b346100fd5760203660031901126100fd576100c66103ea565b6003546001600160a01b0391906100e09083163314610404565b1680156100f95781546001600160a01b03191617905580f35b8280fd5b5080fd5b8390346100fd5760203660031901126100fd5760609181906001600160a01b036101296103ea565b1681526002602052209081549160ff60026001830154920154169082519384526020840152151590820152f35b905082346101905760a03660031901126101905750610187602092608435906064359060443590602435903561049f565b90519015158152f35b80fd5b8334610190576020366003190112610190576101ad6103ea565b600354906001600160a01b03906101c73383851614610404565b169081156100f9576001600160a01b0319161760035580f35b5050346100fd5760203660031901126100fd57356101fc61043e565b6127108110156100fd57815580f35b919050346100f957826003193601126100f9575490516001600160a01b03909116815260209150f35b8390346100fd57816003193601126100fd576020906001549051908152f35b8390346100fd57816003193601126100fd5760035490516001600160a01b039091168152602090f35b8390346100fd57816003193601126100fd57602091549051908152f35b8390346100fd5760203660031901126100fd576020916001600160a01b03908290826102c36103ea565b168152600585522054169051908152f35b8390346100fd57806003193601126100fd576102ee6103ea565b6001600160a01b0360243581811693929084900361032c5761030e61043e565b1683526005602052822080546001600160a01b031916909117905580f35b8480fd5b5050346100fd5760203660031901126100fd573561034c61043e565b6127108110156100fd5760015580f35b8390346100fd5760603660031901126100fd576103776103ea565b9060243560443561038661043e565b612710808210156103e65782101561032c578260029351926103a784610470565b835260208301918252808301946001865260018060a01b0316865283602052852091518255516001820155019051151560ff8019835416911617905580f35b8580fd5b600435906001600160a01b038216820361040057565b5f80fd5b1561040b57565b60405162461bcd60e51b815260206004820152600b60248201526a08585d5d1a1bdc9a5e995960aa1b6044820152606490fd5b60035461046090336001600160a01b0391821614908115610462575b50610404565b565b90506004541633145f61045a565b606081019081106001600160401b0382111761048b57604052565b634e487b7160e01b5f52604160045260245ffd5b9091935f93338552600560205260018060a01b0360408620541691821561057957509160a49160209493604051978895869463e53ec13f60e01b865260048601526024850152604484015260648301523360848301525afa91821561056c57819261050957505090565b90915060203d8111610565575b601f8101601f191682016001600160401b03811183821017610551576020918391604052810103126100fd5751908115158203610190575090565b634e487b7160e01b84526041600452602484fd5b503d610516565b50604051903d90823e3d90fd5b9450505061058793506105b1565b90565b8181029291811591840414171561059d57565b634e487b7160e01b5f52601160045260245ffd5b91610606905f93338552600260205260408520906040516105d181610470565b604083549182815260ff6002600187015496876020850152015416151591829101525f14610628575b6127109485918561058a565b0410610621576106159161058a565b04106105875750600190565b5050505090565b50855460015492506105fa56fea264697066735822122093fd76b42b805d935a0ae5b8ad989ad1bcc78fe72db7b2d47020c940ee497f7564736f6c63430008140033","sourceMap":"683:3595:2:-:0;;;;;;;;;;;;;1481:10;683:3595;1468:23;683:3595;;;1468:23;683:3595;1481:10;683:3595;1501:23;683:3595;;;1501:23;683:3595;1553:3;-1:-1:-1;683:3595:2;1583:3;683:3595;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x604060808152600480361015610013575f80fd5b5f91823560e01c908162fd31f01461035c5781630ef5ee02146103305781631afdc5a2146102d457816327fff0db146102995781634a5d09431461027c5781635aa6e675146102535781637d9699321461023457816388a8d6021461020b578163950b3d73146101e0578163ab033ea914610193578163c70fa00b14610156578163c935433714610101575063d4a22bde146100ad575f80fd5b346100fd5760203660031901126100fd576100c66103ea565b6003546001600160a01b0391906100e09083163314610404565b1680156100f95781546001600160a01b03191617905580f35b8280fd5b5080fd5b8390346100fd5760203660031901126100fd5760609181906001600160a01b036101296103ea565b1681526002602052209081549160ff60026001830154920154169082519384526020840152151590820152f35b905082346101905760a03660031901126101905750610187602092608435906064359060443590602435903561049f565b90519015158152f35b80fd5b8334610190576020366003190112610190576101ad6103ea565b600354906001600160a01b03906101c73383851614610404565b169081156100f9576001600160a01b0319161760035580f35b5050346100fd5760203660031901126100fd57356101fc61043e565b6127108110156100fd57815580f35b919050346100f957826003193601126100f9575490516001600160a01b03909116815260209150f35b8390346100fd57816003193601126100fd576020906001549051908152f35b8390346100fd57816003193601126100fd5760035490516001600160a01b039091168152602090f35b8390346100fd57816003193601126100fd57602091549051908152f35b8390346100fd5760203660031901126100fd576020916001600160a01b03908290826102c36103ea565b168152600585522054169051908152f35b8390346100fd57806003193601126100fd576102ee6103ea565b6001600160a01b0360243581811693929084900361032c5761030e61043e565b1683526005602052822080546001600160a01b031916909117905580f35b8480fd5b5050346100fd5760203660031901126100fd573561034c61043e565b6127108110156100fd5760015580f35b8390346100fd5760603660031901126100fd576103776103ea565b9060243560443561038661043e565b612710808210156103e65782101561032c578260029351926103a784610470565b835260208301918252808301946001865260018060a01b0316865283602052852091518255516001820155019051151560ff8019835416911617905580f35b8580fd5b600435906001600160a01b038216820361040057565b5f80fd5b1561040b57565b60405162461bcd60e51b815260206004820152600b60248201526a08585d5d1a1bdc9a5e995960aa1b6044820152606490fd5b60035461046090336001600160a01b0391821614908115610462575b50610404565b565b90506004541633145f61045a565b606081019081106001600160401b0382111761048b57604052565b634e487b7160e01b5f52604160045260245ffd5b9091935f93338552600560205260018060a01b0360408620541691821561057957509160a49160209493604051978895869463e53ec13f60e01b865260048601526024850152604484015260648301523360848301525afa91821561056c57819261050957505090565b90915060203d8111610565575b601f8101601f191682016001600160401b03811183821017610551576020918391604052810103126100fd5751908115158203610190575090565b634e487b7160e01b84526041600452602484fd5b503d610516565b50604051903d90823e3d90fd5b9450505061058793506105b1565b90565b8181029291811591840414171561059d57565b634e487b7160e01b5f52601160045260245ffd5b91610606905f93338552600260205260408520906040516105d181610470565b604083549182815260ff6002600187015496876020850152015416151591829101525f14610628575b6127109485918561058a565b0410610621576106159161058a565b04106105875750600190565b5050505090565b50855460015492506105fa56fea264697066735822122093fd76b42b805d935a0ae5b8ad989ad1bcc78fe72db7b2d47020c940ee497f7564736f6c63430008140033","sourceMap":"683:3595:2:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;:::i;:::-;;;-1:-1:-1;;;;;683:3595:2;;1243:48;;683:3595;;1251:10;:24;1243:48;:::i;:::-;683:3595;1844:25;;683:3595;;;;-1:-1:-1;;;;;;683:3595:2;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;;;-1:-1:-1;;;;;683:3595:2;;:::i;:::-;;;;870:50;683:3595;;;;;;870:50;683:3595;870:50;683:3595;870:50;;683:3595;870:50;;683:3595;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;2948:65;683:3595;;;;;;;;;;;;;;;2948:65;:::i;:::-;683:3595;;;;;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;:::i;:::-;;;;-1:-1:-1;;;;;683:3595:2;1243:48;1251:10;683:3595;;;1251:24;1243:48;:::i;:::-;683:3595;1685:25;;;683:3595;;-1:-1:-1;;;;;;683:3595:2;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;1115:71;;:::i;:::-;786:6;2015:27;;683:3595;;;786:6;;683:3595;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;683:3595:2;;;;;;;-1:-1:-1;683:3595:2;;;;;;;;;;;;;;;;;835:29;683:3595;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;683:3595:2;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;-1:-1:-1;;;;;683:3595:2;;;;;;:::i;:::-;;;;990:41;683:3595;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1;;;;;683:3595:2;;;;;;;;;;;;;1115:71;;:::i;:::-;683:3595;;;2707:6;683:3595;;;;;;-1:-1:-1;;;;;;683:3595:2;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;1115:71;;:::i;:::-;786:6;2196:25;;683:3595;;;;786:6;683:3595;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;:::i;:::-;;;;;;1115:71;;:::i;:::-;786:6;2447:25;;;683:3595;;;2491:27;;683:3595;;;;2529:16;683:3595;;;;;;:::i;:::-;;;;2559:48;;683:3595;;;2559:48;;;683:3595;;;;;;;;;;;;;;;;;;;786:6;;683:3595;;;;786:6;683:3595;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;683:3595:2;;;;;;:::o;:::-;;;;;;;;:::o;:::-;;;-1:-1:-1;;;683:3595:2;;;;;;;;;;;;-1:-1:-1;;;683:3595:2;;;;;;;1304:134;1377:10;683:3595;1355:76;;1363:10;-1:-1:-1;;;;;683:3595:2;;;1363:24;;:52;;;;1304:134;1355:76;;:::i;:::-;1304:134::o;1363:52::-;683:3595;;1405:10;683:3595;;1363:10;1391:24;1363:52;;;683:3595;;;;;;;-1:-1:-1;;;;;683:3595:2;;;;;;;:::o;:::-;;;;;;;;;;;;3026:475;;;;-1:-1:-1;3255:10:2;;683:3595;;3248:6;683:3595;;;;;;;;;;;;3281:25;;;3277:108;;683:3595;;;;;;;;;;;;;;;;;3402:92;;;;;683:3595;;;;;;;;;;;;;3255:10;683:3595;;;;3402:92;;;;;;;;;;;3395:99;;3026:475;:::o;3402:92::-;;;;683:3595;3402:92;;;;;;683:3595;;;-1:-1:-1;;683:3595:2;;;-1:-1:-1;;;;;683:3595:2;;;;;;;;;;;;;;3402:92;;683:3595;;;;;;;;;;;;;3402:92;3026:475;:::o;683:3595::-;-1:-1:-1;;;683:3595:2;;;3402:92;683:3595;;;;3402:92;;;;;;683:3595;;;;;;;;;;;3277:108;3329:45;;;;;;;;:::i;:::-;3322:52;:::o;683:3595::-;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;3507:769;;4066:30;3507:769;-1:-1:-1;3698:10:2;;683:3595;;3681:16;683:3595;;;;;;;;;;;:::i;:::-;;;;;;;;;3681:16;683:3595;;;;;;;;;;;;;;;;;;;;3787:253;683:3595;;;3787:253;786:6;4066:30;;;;;:::i;:::-;683:3595;-1:-1:-1;4050:97:2;;4170:28;;;:::i;:::-;683:3595;-1:-1:-1;4156:93:2;;4258:11;683:3595;3507:769;:::o;4050:97::-;4124:12;;;;;:::o;3787:253::-;-1:-1:-1;683:3595:2;;;;;-1:-1:-1;3787:253:2;","linkReferences":{}},"methodIdentifiers":{"check(uint256,uint256,uint256,uint256,uint256)":"c70fa00b","checks(address)":"27fff0db","governance()":"5aa6e675","lossLimitRatio()":"7d969932","management()":"88a8d602","profitLimitRatio()":"4a5d0943","setCheck(address,address)":"1afdc5a2","setGovernance(address)":"ab033ea9","setManagement(address)":"d4a22bde","setProfitLimitRatio(uint256)":"950b3d73","setStrategyLimits(address,uint256,uint256)":"00fd31f0","setlossLimitRatio(uint256)":"0ef5ee02","strategiesLimits(address)":"c9354337"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"profit\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"loss\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"debtPayment\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"debtOutstanding\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalDebt\",\"type\":\"uint256\"}],\"name\":\"check\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"checks\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"governance\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lossLimitRatio\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"management\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"profitLimitRatio\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_strategy\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_check\",\"type\":\"address\"}],\"name\":\"setCheck\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_governance\",\"type\":\"address\"}],\"name\":\"setGovernance\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_management\",\"type\":\"address\"}],\"name\":\"setManagement\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_profitLimitRatio\",\"type\":\"uint256\"}],\"name\":\"setProfitLimitRatio\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_strategy\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_profitLimitRatio\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_lossLimitRatio\",\"type\":\"uint256\"}],\"name\":\"setStrategyLimits\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_lossLimitRatio\",\"type\":\"uint256\"}],\"name\":\"setlossLimitRatio\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"strategiesLimits\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"profitLimitRatio\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lossLimitRatio\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"exists\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/src/HealthCheckOverall.sol\":\"CommonHealthCheck\"},\"evmVersion\":\"shanghai\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":1},\"remappings\":[\":@openzeppelin/=lib/openzeppelin-contracts/\",\":ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/openzeppelin-contracts/contracts/\"],\"viaIR\":true},\"sources\":{\"contracts/src/HealthCheckOverall.sol\":{\"content\":\"// SPDX-License-Identifier: MIT OR AGPL-3.0\\npragma solidity >=0.8.15;\\npragma experimental ABIEncoderV2;\\n\\ninterface CustomHealthCheck {\\n    function check(\\n        uint256 profit,\\n        uint256 loss,\\n        uint256 debtPayment,\\n        uint256 debtOutstanding,\\n        address callerStrategy\\n    ) external view returns (bool);\\n}\\n\\n\\n// LEGACY INTERFACES PRE 0.3.2\\nstruct LegacyStrategyParams {\\n    uint256 performanceFee;\\n    uint256 activation;\\n    uint256 debtRatio;\\n    uint256 rateLimit;\\n    uint256 lastReport;\\n    uint256 totalDebt;\\n    uint256 totalGain;\\n    uint256 totalLoss;\\n}\\n\\nstruct Limits {\\n    uint256 profitLimitRatio;\\n    uint256 lossLimitRatio;\\n    bool exists;\\n}\\n\\ncontract CommonHealthCheck {\\n    // Default Settings for all strategies\\n    uint256 constant MAX_BPS = 10_000;\\n    uint256 public profitLimitRatio;\\n    uint256 public lossLimitRatio;\\n    mapping(address => Limits) public strategiesLimits;\\n\\n    address public governance;\\n    address public management;\\n\\n    mapping(address => address) public checks;\\n\\n    modifier onlyGovernance() {\\n        _onlyGovernance();\\n        _;\\n    }\\n\\n    modifier onlyAuthorized() {\\n        _onlyAuthorized();\\n        _;\\n    }\\n\\n    function _onlyGovernance() internal view {\\n        require(msg.sender == governance, \\\"!authorized\\\");\\n    }\\n\\n    function _onlyAuthorized() internal view {\\n        require(msg.sender == governance || msg.sender == management, \\\"!authorized\\\");\\n    }\\n\\n    constructor() {\\n        governance = msg.sender;\\n        management = msg.sender;\\n        profitLimitRatio = 300;\\n        lossLimitRatio = 100;\\n    }\\n\\n    function setGovernance(address _governance) external onlyGovernance {\\n        require(_governance != address(0));\\n        governance = _governance;\\n    }\\n\\n    function setManagement(address _management) external onlyGovernance {\\n        require(_management != address(0));\\n        management = _management;\\n    }\\n\\n    function setProfitLimitRatio(uint256 _profitLimitRatio) external onlyAuthorized {\\n        require(_profitLimitRatio < MAX_BPS);\\n        profitLimitRatio = _profitLimitRatio;\\n    }\\n\\n    function setlossLimitRatio(uint256 _lossLimitRatio) external onlyAuthorized {\\n        require(_lossLimitRatio < MAX_BPS);\\n        lossLimitRatio = _lossLimitRatio;\\n    }\\n\\n    function setStrategyLimits(\\n        address _strategy,\\n        uint256 _profitLimitRatio,\\n        uint256 _lossLimitRatio\\n    ) external onlyAuthorized {\\n        require(_lossLimitRatio < MAX_BPS);\\n        require(_profitLimitRatio < MAX_BPS);\\n        strategiesLimits[_strategy] = Limits(_profitLimitRatio, _lossLimitRatio, true);\\n    }\\n\\n    function setCheck(address _strategy, address _check) external onlyAuthorized {\\n        checks[_strategy] = _check;\\n    }\\n\\n    function check(\\n        uint256 profit,\\n        uint256 loss,\\n        uint256 debtPayment,\\n        uint256 debtOutstanding,\\n        uint256 totalDebt\\n    ) external view returns (bool) {\\n        return _runChecks(profit, loss, debtPayment, debtOutstanding, totalDebt);\\n    }\\n\\n    function _runChecks(\\n        uint256 profit,\\n        uint256 loss,\\n        uint256 debtPayment,\\n        uint256 debtOutstanding,\\n        uint256 totalDebt\\n    ) internal view returns (bool) {\\n        address customCheck = checks[msg.sender];\\n\\n        if (customCheck == address(0)) {\\n            return _executeDefaultCheck(profit, loss, totalDebt);\\n        }\\n\\n        return CustomHealthCheck(customCheck).check(profit, loss, debtPayment, debtOutstanding, msg.sender);\\n    }\\n\\n    function _executeDefaultCheck(\\n        uint256 _profit,\\n        uint256 _loss,\\n        uint256 _totalDebt\\n    ) internal view returns (bool) {\\n        Limits memory limits = strategiesLimits[msg.sender];\\n        uint256 _profitLimitRatio;\\n        uint256 _lossLimitRatio;\\n        if (limits.exists) {\\n            _profitLimitRatio = limits.profitLimitRatio;\\n            _lossLimitRatio = limits.lossLimitRatio;\\n        } else {\\n            _profitLimitRatio = profitLimitRatio;\\n            _lossLimitRatio = lossLimitRatio;\\n        }\\n\\n        if (_profit > ((_totalDebt * _profitLimitRatio) / MAX_BPS)) {\\n            return false;\\n        }\\n        if (_loss > ((_totalDebt * _lossLimitRatio) / MAX_BPS)) {\\n            return false;\\n        }\\n        return true;\\n    }\\n}\\n\",\"keccak256\":\"0x84ea3605bb0cf0aed6960ee0dbb47111dcd34d84abf19c8d488d9bafefcbc73a\",\"license\":\"MIT OR AGPL-3.0\"}},\"version\":1}","metadata":{"compiler":{"version":"0.8.20+commit.a1b79de6"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"uint256","name":"profit","type":"uint256"},{"internalType":"uint256","name":"loss","type":"uint256"},{"internalType":"uint256","name":"debtPayment","type":"uint256"},{"internalType":"uint256","name":"debtOutstanding","type":"uint256"},{"internalType":"uint256","name":"totalDebt","type":"uint256"}],"stateMutability":"view","type":"function","name":"check","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"checks","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"governance","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"lossLimitRatio","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"management","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"profitLimitRatio","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"_strategy","type":"address"},{"internalType":"address","name":"_check","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"setCheck"},{"inputs":[{"internalType":"address","name":"_governance","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"setGovernance"},{"inputs":[{"internalType":"address","name":"_management","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"setManagement"},{"inputs":[{"internalType":"uint256","name":"_profitLimitRatio","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"setProfitLimitRatio"},{"inputs":[{"internalType":"address","name":"_strategy","type":"address"},{"internalType":"uint256","name":"_profitLimitRatio","type":"uint256"},{"internalType":"uint256","name":"_lossLimitRatio","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"setStrategyLimits"},{"inputs":[{"internalType":"uint256","name":"_lossLimitRatio","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"setlossLimitRatio"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"strategiesLimits","outputs":[{"internalType":"uint256","name":"profitLimitRatio","type":"uint256"},{"internalType":"uint256","name":"lossLimitRatio","type":"uint256"},{"internalType":"bool","name":"exists","type":"bool"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@openzeppelin/=lib/openzeppelin-contracts/","ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/openzeppelin-contracts/contracts/"],"optimizer":{"enabled":true,"runs":1},"metadata":{"useLiteralContent":true,"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/src/HealthCheckOverall.sol":"CommonHealthCheck"},"evmVersion":"shanghai","libraries":{},"viaIR":true},"sources":{"contracts/src/HealthCheckOverall.sol":{"keccak256":"0x84ea3605bb0cf0aed6960ee0dbb47111dcd34d84abf19c8d488d9bafefcbc73a","urls":[],"content":"// SPDX-License-Identifier: MIT OR AGPL-3.0\npragma solidity >=0.8.15;\npragma experimental ABIEncoderV2;\n\ninterface CustomHealthCheck {\n    function check(\n        uint256 profit,\n        uint256 loss,\n        uint256 debtPayment,\n        uint256 debtOutstanding,\n        address callerStrategy\n    ) external view returns (bool);\n}\n\n\n// LEGACY INTERFACES PRE 0.3.2\nstruct LegacyStrategyParams {\n    uint256 performanceFee;\n    uint256 activation;\n    uint256 debtRatio;\n    uint256 rateLimit;\n    uint256 lastReport;\n    uint256 totalDebt;\n    uint256 totalGain;\n    uint256 totalLoss;\n}\n\nstruct Limits {\n    uint256 profitLimitRatio;\n    uint256 lossLimitRatio;\n    bool exists;\n}\n\ncontract CommonHealthCheck {\n    // Default Settings for all strategies\n    uint256 constant MAX_BPS = 10_000;\n    uint256 public profitLimitRatio;\n    uint256 public lossLimitRatio;\n    mapping(address => Limits) public strategiesLimits;\n\n    address public governance;\n    address public management;\n\n    mapping(address => address) public checks;\n\n    modifier onlyGovernance() {\n        _onlyGovernance();\n        _;\n    }\n\n    modifier onlyAuthorized() {\n        _onlyAuthorized();\n        _;\n    }\n\n    function _onlyGovernance() internal view {\n        require(msg.sender == governance, \"!authorized\");\n    }\n\n    function _onlyAuthorized() internal view {\n        require(msg.sender == governance || msg.sender == management, \"!authorized\");\n    }\n\n    constructor() {\n        governance = msg.sender;\n        management = msg.sender;\n        profitLimitRatio = 300;\n        lossLimitRatio = 100;\n    }\n\n    function setGovernance(address _governance) external onlyGovernance {\n        require(_governance != address(0));\n        governance = _governance;\n    }\n\n    function setManagement(address _management) external onlyGovernance {\n        require(_management != address(0));\n        management = _management;\n    }\n\n    function setProfitLimitRatio(uint256 _profitLimitRatio) external onlyAuthorized {\n        require(_profitLimitRatio < MAX_BPS);\n        profitLimitRatio = _profitLimitRatio;\n    }\n\n    function setlossLimitRatio(uint256 _lossLimitRatio) external onlyAuthorized {\n        require(_lossLimitRatio < MAX_BPS);\n        lossLimitRatio = _lossLimitRatio;\n    }\n\n    function setStrategyLimits(\n        address _strategy,\n        uint256 _profitLimitRatio,\n        uint256 _lossLimitRatio\n    ) external onlyAuthorized {\n        require(_lossLimitRatio < MAX_BPS);\n        require(_profitLimitRatio < MAX_BPS);\n        strategiesLimits[_strategy] = Limits(_profitLimitRatio, _lossLimitRatio, true);\n    }\n\n    function setCheck(address _strategy, address _check) external onlyAuthorized {\n        checks[_strategy] = _check;\n    }\n\n    function check(\n        uint256 profit,\n        uint256 loss,\n        uint256 debtPayment,\n        uint256 debtOutstanding,\n        uint256 totalDebt\n    ) external view returns (bool) {\n        return _runChecks(profit, loss, debtPayment, debtOutstanding, totalDebt);\n    }\n\n    function _runChecks(\n        uint256 profit,\n        uint256 loss,\n        uint256 debtPayment,\n        uint256 debtOutstanding,\n        uint256 totalDebt\n    ) internal view returns (bool) {\n        address customCheck = checks[msg.sender];\n\n        if (customCheck == address(0)) {\n            return _executeDefaultCheck(profit, loss, totalDebt);\n        }\n\n        return CustomHealthCheck(customCheck).check(profit, loss, debtPayment, debtOutstanding, msg.sender);\n    }\n\n    function _executeDefaultCheck(\n        uint256 _profit,\n        uint256 _loss,\n        uint256 _totalDebt\n    ) internal view returns (bool) {\n        Limits memory limits = strategiesLimits[msg.sender];\n        uint256 _profitLimitRatio;\n        uint256 _lossLimitRatio;\n        if (limits.exists) {\n            _profitLimitRatio = limits.profitLimitRatio;\n            _lossLimitRatio = limits.lossLimitRatio;\n        } else {\n            _profitLimitRatio = profitLimitRatio;\n            _lossLimitRatio = lossLimitRatio;\n        }\n\n        if (_profit > ((_totalDebt * _profitLimitRatio) / MAX_BPS)) {\n            return false;\n        }\n        if (_loss > ((_totalDebt * _lossLimitRatio) / MAX_BPS)) {\n            return false;\n        }\n        return true;\n    }\n}\n","license":"MIT OR AGPL-3.0"}},"version":1},"id":2}