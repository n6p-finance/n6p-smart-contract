{"abi":[{"type":"constructor","inputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"check","inputs":[{"name":"profit","type":"uint256","internalType":"uint256"},{"name":"loss","type":"uint256","internalType":"uint256"},{"name":"debtPayment","type":"uint256","internalType":"uint256"},{"name":"debtOutstanding","type":"uint256","internalType":"uint256"},{"name":"totalDebt","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"checks","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"governance","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"lossLimitRatio","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"management","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"profitLimitRatio","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"setCheck","inputs":[{"name":"_strategy","type":"address","internalType":"address"},{"name":"_check","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setGovernance","inputs":[{"name":"_governance","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setManagement","inputs":[{"name":"_management","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setProfitLimitRatio","inputs":[{"name":"_profitLimitRatio","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setStrategyLimits","inputs":[{"name":"_strategy","type":"address","internalType":"address"},{"name":"_profitLimitRatio","type":"uint256","internalType":"uint256"},{"name":"_lossLimitRatio","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setlossLimitRatio","inputs":[{"name":"_lossLimitRatio","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"strategiesLimits","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"profitLimitRatio","type":"uint256","internalType":"uint256"},{"name":"lossLimitRatio","type":"uint256","internalType":"uint256"},{"name":"exists","type":"bool","internalType":"bool"}],"stateMutability":"view"}],"bytecode":{"object":"0x6080806040523460415760038054336001600160a01b0319918216811790925560048054909116909117905561012c5f55606460015561065490816100468239f35b5f80fdfe60806040526004361015610011575f80fd5b5f3560e01c8062fd31f0146103575780630ef5ee021461032c5780631afdc5a2146102cc57806327fff0db1461028c5780634a5d0943146102705780635aa6e675146102485780637d9699321461022b57806388a8d60214610203578063950b3d73146101d9578063ab033ea914610186578063c70fa00b14610152578063c9354337146100fe5763d4a22bde146100a7575f80fd5b346100fa5760203660031901126100fa576100c06103e5565b6100d560018060a01b0360035416331461042a565b6001600160a01b031680156100fa57600480546001600160a01b031916919091179055005b5f80fd5b346100fa5760203660031901126100fa576001600160a01b0361011f6103e5565b165f526002602052606060405f2080549060ff600260018301549201541690604051928352602083015215156040820152f35b346100fa5760a03660031901126100fa57602061017c608435606435604435602435600435610498565b6040519015158152f35b346100fa5760203660031901126100fa5761019f6103e5565b6101b460018060a01b0360035416331461042a565b6001600160a01b031680156100fa57600380546001600160a01b031916919091179055005b346100fa5760203660031901126100fa576004356101f5610464565b6127108110156100fa575f55005b346100fa575f3660031901126100fa576004546040516001600160a01b039091168152602090f35b346100fa575f3660031901126100fa576020600154604051908152f35b346100fa575f3660031901126100fa576003546040516001600160a01b039091168152602090f35b346100fa575f3660031901126100fa5760205f54604051908152f35b346100fa5760203660031901126100fa576001600160a01b036102ad6103e5565b165f526005602052602060018060a01b0360405f205416604051908152f35b346100fa5760403660031901126100fa576102e56103e5565b6024356001600160a01b03811691908290036100fa57610303610464565b6001600160a01b03165f90815260056020526040902080546001600160a01b0319169091179055005b346100fa5760203660031901126100fa57600435610348610464565b6127108110156100fa57600155005b346100fa5760603660031901126100fa576103706103e5565b60443560243561037e610464565b6127108210156100fa576127108110156100fa57600291604051916103a2836103fb565b82526020820190815260408201936001855260018060a01b03165f528260205260405f2091518255516001820155019051151560ff801983541691161790555f80f35b600435906001600160a01b03821682036100fa57565b606081019081106001600160401b0382111761041657604052565b634e487b7160e01b5f52604160045260245ffd5b1561043157565b60405162461bcd60e51b815260206004820152600b60248201526a08585d5d1a1bdc9a5e995960aa1b6044820152606490fd5b6003546001600160a01b031633148015610484575b6104829061042a565b565b506004546001600160a01b03163314610479565b93909192335f52600560205260018060a01b0360405f20541691821561055857509360a49160209495604051968795869463e53ec13f60e01b865260048601526024850152604484015260648301523360848301525afa90811561054d575f91610500575090565b905060203d602011610546575b601f8101601f191682016001600160401b03811183821017610416576020918391604052810103126100fa575180151581036100fa5790565b503d61050d565b6040513d5f823e3d90fd5b935050506105659261058f565b90565b8181029291811591840414171561057b57565b634e487b7160e01b5f52601160045260245ffd5b9091335f52600260205260405f20916040516105aa816103fb565b604084549182815260ff6002600188015497886020850152015416151591829101525f14610609576105e0612710915b84610568565b041061060257612710916105f391610568565b04106105fe57600190565b5f90565b5050505f90565b5091505f54916127106105e0600154946105da56fea2646970667358221220b38d36538dfa923cfc21df26e9380fbdfcf2a46ec18e8f3d9f895061ec1a128b64736f6c634300081e0033","sourceMap":"683:3595:2:-:0;;;;;;;1468:23;683:3595;;1481:10;-1:-1:-1;;;;;;683:3595:2;;;;;;;;1501:23;683:3595;;;;;;;;;;1553:3;-1:-1:-1;683:3595:2;1583:3;-1:-1:-1;683:3595:2;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x60806040526004361015610011575f80fd5b5f3560e01c8062fd31f0146103575780630ef5ee021461032c5780631afdc5a2146102cc57806327fff0db1461028c5780634a5d0943146102705780635aa6e675146102485780637d9699321461022b57806388a8d60214610203578063950b3d73146101d9578063ab033ea914610186578063c70fa00b14610152578063c9354337146100fe5763d4a22bde146100a7575f80fd5b346100fa5760203660031901126100fa576100c06103e5565b6100d560018060a01b0360035416331461042a565b6001600160a01b031680156100fa57600480546001600160a01b031916919091179055005b5f80fd5b346100fa5760203660031901126100fa576001600160a01b0361011f6103e5565b165f526002602052606060405f2080549060ff600260018301549201541690604051928352602083015215156040820152f35b346100fa5760a03660031901126100fa57602061017c608435606435604435602435600435610498565b6040519015158152f35b346100fa5760203660031901126100fa5761019f6103e5565b6101b460018060a01b0360035416331461042a565b6001600160a01b031680156100fa57600380546001600160a01b031916919091179055005b346100fa5760203660031901126100fa576004356101f5610464565b6127108110156100fa575f55005b346100fa575f3660031901126100fa576004546040516001600160a01b039091168152602090f35b346100fa575f3660031901126100fa576020600154604051908152f35b346100fa575f3660031901126100fa576003546040516001600160a01b039091168152602090f35b346100fa575f3660031901126100fa5760205f54604051908152f35b346100fa5760203660031901126100fa576001600160a01b036102ad6103e5565b165f526005602052602060018060a01b0360405f205416604051908152f35b346100fa5760403660031901126100fa576102e56103e5565b6024356001600160a01b03811691908290036100fa57610303610464565b6001600160a01b03165f90815260056020526040902080546001600160a01b0319169091179055005b346100fa5760203660031901126100fa57600435610348610464565b6127108110156100fa57600155005b346100fa5760603660031901126100fa576103706103e5565b60443560243561037e610464565b6127108210156100fa576127108110156100fa57600291604051916103a2836103fb565b82526020820190815260408201936001855260018060a01b03165f528260205260405f2091518255516001820155019051151560ff801983541691161790555f80f35b600435906001600160a01b03821682036100fa57565b606081019081106001600160401b0382111761041657604052565b634e487b7160e01b5f52604160045260245ffd5b1561043157565b60405162461bcd60e51b815260206004820152600b60248201526a08585d5d1a1bdc9a5e995960aa1b6044820152606490fd5b6003546001600160a01b031633148015610484575b6104829061042a565b565b506004546001600160a01b03163314610479565b93909192335f52600560205260018060a01b0360405f20541691821561055857509360a49160209495604051968795869463e53ec13f60e01b865260048601526024850152604484015260648301523360848301525afa90811561054d575f91610500575090565b905060203d602011610546575b601f8101601f191682016001600160401b03811183821017610416576020918391604052810103126100fa575180151581036100fa5790565b503d61050d565b6040513d5f823e3d90fd5b935050506105659261058f565b90565b8181029291811591840414171561057b57565b634e487b7160e01b5f52601160045260245ffd5b9091335f52600260205260405f20916040516105aa816103fb565b604084549182815260ff6002600188015497886020850152015416151591829101525f14610609576105e0612710915b84610568565b041061060257612710916105f391610568565b04106105fe57600190565b5f90565b5050505f90565b5091505f54916127106105e0600154946105da56fea2646970667358221220b38d36538dfa923cfc21df26e9380fbdfcf2a46ec18e8f3d9f895061ec1a128b64736f6c634300081e0033","sourceMap":"683:3595:2:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;:::i;:::-;1243:48;683:3595;;;;;1265:10;683:3595;;1251:10;:24;1243:48;:::i;:::-;-1:-1:-1;;;;;683:3595:2;1844:25;;786:6;;683:3595;;;-1:-1:-1;;;;;;683:3595:2;;;;;;;;786:6;683:3595;786:6;;683:3595;;;;;;-1:-1:-1;;683:3595:2;;;;-1:-1:-1;;;;;683:3595:2;;:::i;:::-;;;;870:50;683:3595;;;;;;;;870:50;683:3595;870:50;;;;683:3595;870:50;;683:3595;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;2948:65;683:3595;;;;;;;;;;2948:65;:::i;:::-;683:3595;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;:::i;:::-;1243:48;683:3595;;;;;1265:10;683:3595;;1251:10;:24;1243:48;:::i;:::-;-1:-1:-1;;;;;683:3595:2;1685:25;;786:6;;1721:24;683:3595;;-1:-1:-1;;;;;;683:3595:2;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;1115:71;;:::i;:::-;786:6;2015:27;;786:6;;;683:3595;786:6;683:3595;;;;;;;-1:-1:-1;;683:3595:2;;;;;;;;-1:-1:-1;;;;;683:3595:2;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;835:29;683:3595;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;927:25;683:3595;;;-1:-1:-1;;;;;683:3595:2;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;-1:-1:-1;;;;;683:3595:2;;:::i;:::-;;;;990:41;683:3595;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;:::i;:::-;;;-1:-1:-1;;;;;683:3595:2;;;;;;;;;1115:71;;:::i;:::-;-1:-1:-1;;;;;683:3595:2;;;;;2707:6;683:3595;;;;;;;-1:-1:-1;;;;;;683:3595:2;;;;;;;;;;;;;-1:-1:-1;;683:3595:2;;;;;;1115:71;;:::i;:::-;786:6;2196:25;;786:6;;;683:3595;786:6;683:3595;;;;;;;-1:-1:-1;;683:3595:2;;;;;;:::i;:::-;;;;;1115:71;;:::i;:::-;786:6;2447:25;;786:6;;;;2491:27;;786:6;;;2529:16;683:3595;;;786:6;;;;:::i;:::-;;;683:3595;2559:48;;786:6;;;683:3595;2559:48;;786:6;683:3595;786:6;;683:3595;;;;;;;;;;;;;;786:6;;;;;683:3595;786:6;;;;;;683:3595;;786:6;;;;;;;;;;;683:3595;;;;;;;-1:-1:-1;;;;;683:3595:2;;;;;;:::o;786:6::-;683:3595;786:6;;;;;-1:-1:-1;;;;;786:6:2;;;;;;;:::o;:::-;;;;-1:-1:-1;786:6:2;;;;;-1:-1:-1;786:6:2;683:3595;;;;:::o;:::-;;;-1:-1:-1;;;683:3595:2;;;;;;;;;;;;-1:-1:-1;;;683:3595:2;;;;;;;1304:134;1377:10;683:3595;-1:-1:-1;;;;;683:3595:2;1363:10;:24;:52;;;;1304:134;1355:76;;;:::i;:::-;1304:134::o;1363:52::-;-1:-1:-1;1405:10:2;683:3595;-1:-1:-1;;;;;683:3595:2;1363:10;1391:24;1363:52;;3026:475;;;;;3255:10;683:3595;;3248:6;683:3595;;;;;;;;;;;;3281:25;;;3277:108;;683:3595;;3402:92;683:3595;;;;;;;;;;;;;;3402:92;;;;;683:3595;;;;;;;;;;;;;3255:10;683:3595;;;;3402:92;;;;;;;683:3595;3402:92;;;3395:99;3026:475;:::o;3402:92::-;;;683:3595;3402:92;683:3595;3402:92;;;;786:6;;;-1:-1:-1;;786:6:2;;;-1:-1:-1;;;;;786:6:2;;;;;;;;683:3595;786:6;;;683:3595;786:6;3402:92;;683:3595;;;;;;;;;;;;3026:475;:::o;3402:92::-;;;;;;683:3595;;;;;;;;;3277:108;3329:45;;;;;;;:::i;:::-;3322:52;:::o;683:3595::-;;;;;;;;;;;;;;;;:::o;:::-;786:6;;;683:3595;;;;;;;;3507:769;;;3698:10;-1:-1:-1;683:3595:2;3681:16;683:3595;;;-1:-1:-1;683:3595:2;;;;786:6;;;:::i;:::-;683:3595;;;786:6;;;;683:3595;3681:16;683:3595;;;;;;;;;786:6;683:3595;;;;;;;;;786:6;3787:253;786:6;;;4066:30;786:6;3820:43;3787:253;4066:30;;:::i;:::-;683:3595;-1:-1:-1;4050:97:2;;786:6;4170:28;;;;:::i;:::-;683:3595;-1:-1:-1;4156:93:2;;683:3595;3507:769;:::o;4156:93::-;-1:-1:-1;4226:12:2;:::o;4050:97::-;4124:12;;;-1:-1:-1;4124:12:2;:::o;3787:253::-;683:3595;;;-1:-1:-1;683:3595:2;;786:6;4066:30;683:3595;;3787:253;;","linkReferences":{}},"methodIdentifiers":{"check(uint256,uint256,uint256,uint256,uint256)":"c70fa00b","checks(address)":"27fff0db","governance()":"5aa6e675","lossLimitRatio()":"7d969932","management()":"88a8d602","profitLimitRatio()":"4a5d0943","setCheck(address,address)":"1afdc5a2","setGovernance(address)":"ab033ea9","setManagement(address)":"d4a22bde","setProfitLimitRatio(uint256)":"950b3d73","setStrategyLimits(address,uint256,uint256)":"00fd31f0","setlossLimitRatio(uint256)":"0ef5ee02","strategiesLimits(address)":"c9354337"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"profit\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"loss\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"debtPayment\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"debtOutstanding\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalDebt\",\"type\":\"uint256\"}],\"name\":\"check\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"checks\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"governance\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lossLimitRatio\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"management\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"profitLimitRatio\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_strategy\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_check\",\"type\":\"address\"}],\"name\":\"setCheck\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_governance\",\"type\":\"address\"}],\"name\":\"setGovernance\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_management\",\"type\":\"address\"}],\"name\":\"setManagement\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_profitLimitRatio\",\"type\":\"uint256\"}],\"name\":\"setProfitLimitRatio\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_strategy\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_profitLimitRatio\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_lossLimitRatio\",\"type\":\"uint256\"}],\"name\":\"setStrategyLimits\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_lossLimitRatio\",\"type\":\"uint256\"}],\"name\":\"setlossLimitRatio\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"strategiesLimits\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"profitLimitRatio\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lossLimitRatio\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"exists\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/src/HealthCheckOverall.sol\":\"CommonHealthCheck\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":1},\"remappings\":[\":@openzeppelin/=lib/openzeppelin-contracts/\",\":ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/openzeppelin-contracts/contracts/\"],\"viaIR\":true},\"sources\":{\"contracts/src/HealthCheckOverall.sol\":{\"content\":\"// SPDX-License-Identifier: MIT OR AGPL-3.0\\npragma solidity >=0.8.15;\\npragma experimental ABIEncoderV2;\\n\\ninterface CustomHealthCheck {\\n    function check(\\n        uint256 profit,\\n        uint256 loss,\\n        uint256 debtPayment,\\n        uint256 debtOutstanding,\\n        address callerStrategy\\n    ) external view returns (bool);\\n}\\n\\n\\n// LEGACY INTERFACES PRE 0.3.2\\nstruct LegacyStrategyParams {\\n    uint256 performanceFee;\\n    uint256 activation;\\n    uint256 debtRatio;\\n    uint256 rateLimit;\\n    uint256 lastReport;\\n    uint256 totalDebt;\\n    uint256 totalGain;\\n    uint256 totalLoss;\\n}\\n\\nstruct Limits {\\n    uint256 profitLimitRatio;\\n    uint256 lossLimitRatio;\\n    bool exists;\\n}\\n\\ncontract CommonHealthCheck {\\n    // Default Settings for all strategies\\n    uint256 constant MAX_BPS = 10_000;\\n    uint256 public profitLimitRatio;\\n    uint256 public lossLimitRatio;\\n    mapping(address => Limits) public strategiesLimits;\\n\\n    address public governance;\\n    address public management;\\n\\n    mapping(address => address) public checks;\\n\\n    modifier onlyGovernance() {\\n        _onlyGovernance();\\n        _;\\n    }\\n\\n    modifier onlyAuthorized() {\\n        _onlyAuthorized();\\n        _;\\n    }\\n\\n    function _onlyGovernance() internal view {\\n        require(msg.sender == governance, \\\"!authorized\\\");\\n    }\\n\\n    function _onlyAuthorized() internal view {\\n        require(msg.sender == governance || msg.sender == management, \\\"!authorized\\\");\\n    }\\n\\n    constructor() {\\n        governance = msg.sender;\\n        management = msg.sender;\\n        profitLimitRatio = 300;\\n        lossLimitRatio = 100;\\n    }\\n\\n    function setGovernance(address _governance) external onlyGovernance {\\n        require(_governance != address(0));\\n        governance = _governance;\\n    }\\n\\n    function setManagement(address _management) external onlyGovernance {\\n        require(_management != address(0));\\n        management = _management;\\n    }\\n\\n    function setProfitLimitRatio(uint256 _profitLimitRatio) external onlyAuthorized {\\n        require(_profitLimitRatio < MAX_BPS);\\n        profitLimitRatio = _profitLimitRatio;\\n    }\\n\\n    function setlossLimitRatio(uint256 _lossLimitRatio) external onlyAuthorized {\\n        require(_lossLimitRatio < MAX_BPS);\\n        lossLimitRatio = _lossLimitRatio;\\n    }\\n\\n    function setStrategyLimits(\\n        address _strategy,\\n        uint256 _profitLimitRatio,\\n        uint256 _lossLimitRatio\\n    ) external onlyAuthorized {\\n        require(_lossLimitRatio < MAX_BPS);\\n        require(_profitLimitRatio < MAX_BPS);\\n        strategiesLimits[_strategy] = Limits(_profitLimitRatio, _lossLimitRatio, true);\\n    }\\n\\n    function setCheck(address _strategy, address _check) external onlyAuthorized {\\n        checks[_strategy] = _check;\\n    }\\n\\n    function check(\\n        uint256 profit,\\n        uint256 loss,\\n        uint256 debtPayment,\\n        uint256 debtOutstanding,\\n        uint256 totalDebt\\n    ) external view returns (bool) {\\n        return _runChecks(profit, loss, debtPayment, debtOutstanding, totalDebt);\\n    }\\n\\n    function _runChecks(\\n        uint256 profit,\\n        uint256 loss,\\n        uint256 debtPayment,\\n        uint256 debtOutstanding,\\n        uint256 totalDebt\\n    ) internal view returns (bool) {\\n        address customCheck = checks[msg.sender];\\n\\n        if (customCheck == address(0)) {\\n            return _executeDefaultCheck(profit, loss, totalDebt);\\n        }\\n\\n        return CustomHealthCheck(customCheck).check(profit, loss, debtPayment, debtOutstanding, msg.sender);\\n    }\\n\\n    function _executeDefaultCheck(\\n        uint256 _profit,\\n        uint256 _loss,\\n        uint256 _totalDebt\\n    ) internal view returns (bool) {\\n        Limits memory limits = strategiesLimits[msg.sender];\\n        uint256 _profitLimitRatio;\\n        uint256 _lossLimitRatio;\\n        if (limits.exists) {\\n            _profitLimitRatio = limits.profitLimitRatio;\\n            _lossLimitRatio = limits.lossLimitRatio;\\n        } else {\\n            _profitLimitRatio = profitLimitRatio;\\n            _lossLimitRatio = lossLimitRatio;\\n        }\\n\\n        if (_profit > ((_totalDebt * _profitLimitRatio) / MAX_BPS)) {\\n            return false;\\n        }\\n        if (_loss > ((_totalDebt * _lossLimitRatio) / MAX_BPS)) {\\n            return false;\\n        }\\n        return true;\\n    }\\n}\\n\",\"keccak256\":\"0x84ea3605bb0cf0aed6960ee0dbb47111dcd34d84abf19c8d488d9bafefcbc73a\",\"license\":\"MIT OR AGPL-3.0\"}},\"version\":1}","metadata":{"compiler":{"version":"0.8.30+commit.73712a01"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"uint256","name":"profit","type":"uint256"},{"internalType":"uint256","name":"loss","type":"uint256"},{"internalType":"uint256","name":"debtPayment","type":"uint256"},{"internalType":"uint256","name":"debtOutstanding","type":"uint256"},{"internalType":"uint256","name":"totalDebt","type":"uint256"}],"stateMutability":"view","type":"function","name":"check","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"checks","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"governance","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"lossLimitRatio","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"management","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"profitLimitRatio","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"_strategy","type":"address"},{"internalType":"address","name":"_check","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"setCheck"},{"inputs":[{"internalType":"address","name":"_governance","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"setGovernance"},{"inputs":[{"internalType":"address","name":"_management","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"setManagement"},{"inputs":[{"internalType":"uint256","name":"_profitLimitRatio","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"setProfitLimitRatio"},{"inputs":[{"internalType":"address","name":"_strategy","type":"address"},{"internalType":"uint256","name":"_profitLimitRatio","type":"uint256"},{"internalType":"uint256","name":"_lossLimitRatio","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"setStrategyLimits"},{"inputs":[{"internalType":"uint256","name":"_lossLimitRatio","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"setlossLimitRatio"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"strategiesLimits","outputs":[{"internalType":"uint256","name":"profitLimitRatio","type":"uint256"},{"internalType":"uint256","name":"lossLimitRatio","type":"uint256"},{"internalType":"bool","name":"exists","type":"bool"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@openzeppelin/=lib/openzeppelin-contracts/","ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/openzeppelin-contracts/contracts/"],"optimizer":{"enabled":true,"runs":1},"metadata":{"useLiteralContent":true,"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/src/HealthCheckOverall.sol":"CommonHealthCheck"},"evmVersion":"cancun","libraries":{},"viaIR":true},"sources":{"contracts/src/HealthCheckOverall.sol":{"keccak256":"0x84ea3605bb0cf0aed6960ee0dbb47111dcd34d84abf19c8d488d9bafefcbc73a","urls":[],"content":"// SPDX-License-Identifier: MIT OR AGPL-3.0\npragma solidity >=0.8.15;\npragma experimental ABIEncoderV2;\n\ninterface CustomHealthCheck {\n    function check(\n        uint256 profit,\n        uint256 loss,\n        uint256 debtPayment,\n        uint256 debtOutstanding,\n        address callerStrategy\n    ) external view returns (bool);\n}\n\n\n// LEGACY INTERFACES PRE 0.3.2\nstruct LegacyStrategyParams {\n    uint256 performanceFee;\n    uint256 activation;\n    uint256 debtRatio;\n    uint256 rateLimit;\n    uint256 lastReport;\n    uint256 totalDebt;\n    uint256 totalGain;\n    uint256 totalLoss;\n}\n\nstruct Limits {\n    uint256 profitLimitRatio;\n    uint256 lossLimitRatio;\n    bool exists;\n}\n\ncontract CommonHealthCheck {\n    // Default Settings for all strategies\n    uint256 constant MAX_BPS = 10_000;\n    uint256 public profitLimitRatio;\n    uint256 public lossLimitRatio;\n    mapping(address => Limits) public strategiesLimits;\n\n    address public governance;\n    address public management;\n\n    mapping(address => address) public checks;\n\n    modifier onlyGovernance() {\n        _onlyGovernance();\n        _;\n    }\n\n    modifier onlyAuthorized() {\n        _onlyAuthorized();\n        _;\n    }\n\n    function _onlyGovernance() internal view {\n        require(msg.sender == governance, \"!authorized\");\n    }\n\n    function _onlyAuthorized() internal view {\n        require(msg.sender == governance || msg.sender == management, \"!authorized\");\n    }\n\n    constructor() {\n        governance = msg.sender;\n        management = msg.sender;\n        profitLimitRatio = 300;\n        lossLimitRatio = 100;\n    }\n\n    function setGovernance(address _governance) external onlyGovernance {\n        require(_governance != address(0));\n        governance = _governance;\n    }\n\n    function setManagement(address _management) external onlyGovernance {\n        require(_management != address(0));\n        management = _management;\n    }\n\n    function setProfitLimitRatio(uint256 _profitLimitRatio) external onlyAuthorized {\n        require(_profitLimitRatio < MAX_BPS);\n        profitLimitRatio = _profitLimitRatio;\n    }\n\n    function setlossLimitRatio(uint256 _lossLimitRatio) external onlyAuthorized {\n        require(_lossLimitRatio < MAX_BPS);\n        lossLimitRatio = _lossLimitRatio;\n    }\n\n    function setStrategyLimits(\n        address _strategy,\n        uint256 _profitLimitRatio,\n        uint256 _lossLimitRatio\n    ) external onlyAuthorized {\n        require(_lossLimitRatio < MAX_BPS);\n        require(_profitLimitRatio < MAX_BPS);\n        strategiesLimits[_strategy] = Limits(_profitLimitRatio, _lossLimitRatio, true);\n    }\n\n    function setCheck(address _strategy, address _check) external onlyAuthorized {\n        checks[_strategy] = _check;\n    }\n\n    function check(\n        uint256 profit,\n        uint256 loss,\n        uint256 debtPayment,\n        uint256 debtOutstanding,\n        uint256 totalDebt\n    ) external view returns (bool) {\n        return _runChecks(profit, loss, debtPayment, debtOutstanding, totalDebt);\n    }\n\n    function _runChecks(\n        uint256 profit,\n        uint256 loss,\n        uint256 debtPayment,\n        uint256 debtOutstanding,\n        uint256 totalDebt\n    ) internal view returns (bool) {\n        address customCheck = checks[msg.sender];\n\n        if (customCheck == address(0)) {\n            return _executeDefaultCheck(profit, loss, totalDebt);\n        }\n\n        return CustomHealthCheck(customCheck).check(profit, loss, debtPayment, debtOutstanding, msg.sender);\n    }\n\n    function _executeDefaultCheck(\n        uint256 _profit,\n        uint256 _loss,\n        uint256 _totalDebt\n    ) internal view returns (bool) {\n        Limits memory limits = strategiesLimits[msg.sender];\n        uint256 _profitLimitRatio;\n        uint256 _lossLimitRatio;\n        if (limits.exists) {\n            _profitLimitRatio = limits.profitLimitRatio;\n            _lossLimitRatio = limits.lossLimitRatio;\n        } else {\n            _profitLimitRatio = profitLimitRatio;\n            _lossLimitRatio = lossLimitRatio;\n        }\n\n        if (_profit > ((_totalDebt * _profitLimitRatio) / MAX_BPS)) {\n            return false;\n        }\n        if (_loss > ((_totalDebt * _lossLimitRatio) / MAX_BPS)) {\n            return false;\n        }\n        return true;\n    }\n}\n","license":"MIT OR AGPL-3.0"}},"version":1},"id":2}